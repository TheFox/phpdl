(function(e){var m=new Date().getTimezoneOffset();var b=86400;var d={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:false,timeFormat:"g:ia",scrollDefaultNow:false,onSelect:function(){}};var c={init:function(n){return this.each(function(){var r=e(this);if(r[0].tagName=="SELECT"){var q=e("<input />");var s={type:"text",value:r.val()};var o=r[0].attributes;for(var t=0;t<o.length;t++){s[o[t].nodeName]=o[t].nodeValue}q.attr(s);r.replaceWith(q);r=q}var u=e.extend({},d);if(n){u=e.extend(u,n)}if(u.minTime){u.minTime=f(u.minTime)}if(u.maxTime){u.maxTime=f(u.maxTime)}if(u.durationTime){u.durationTime=f(u.durationTime)}r.data("settings",u);r.attr("autocomplete","off");r.click(c.show).focus(c.show).keydown(a);r.addClass("ui-timepicker-input");if(r.val()){var v=g(f(r.val()),u.timeFormat);r.val(v)}var p=e('<span class="ui-timepicker-container" />');r.wrap(p);e("body").attr("tabindex",-1).focusin(function(w){if(e(w.target).closest(".ui-timepicker-container").length==0){c.hide()}})})},show:function(t){var n=e(this);var s=n.siblings(".ui-timepicker-list");if(n.hasClass("ui-timepicker-hideme")){n.removeClass("ui-timepicker-hideme");s.hide();return}if(s.is(":visible")){return}c.hide();if(s.length==0){h(n);s=n.siblings(".ui-timepicker-list")}if((n.offset().top+n.outerHeight(true)+s.outerHeight())>e(window).height()+e(window).scrollTop()){s.css({top:n.position().top-s.outerHeight()})}else{s.css({top:n.position().top+n.outerHeight(true)})}s.show();var q=n.data("settings");var p=s.find(".ui-timepicker-selected");if(!p.length&&q.minTime===null&&q.scrollDefaultNow){var r=f(new Date());p=j(n,s,r)}if(p&&p.length){var o=s.scrollTop()+p.position().top-p.outerHeight();s.scrollTop(o)}else{s.scrollTop(0)}},hide:function(n){e(".ui-timepicker-list:visible").each(function(){var p=e(this);var o=p.siblings(".ui-timepicker-input");k(o);p.hide()})},option:function(o,r){var n=e(this);var p=n.data("settings");var q=n.siblings(".ui-timepicker-list");if(typeof o=="object"){p=e.extend(p,o)}else{if(typeof o=="string"&&typeof r!="undefined"){p[o]=r}else{if(typeof o=="string"){return p[o]}}}if(p.minTime){p.minTime=f(p.minTime)}if(p.maxTime){p.maxTime=f(p.maxTime)}if(p.durationTime){p.durationTime=f(p.durationTime)}n.data("settings",p);q.remove()},getSecondsFromMidnight:function(){return f(e(this).val())},setTime:function(o){var n=e(this);var p=g(f(o),n.data("settings").timeFormat);n.val(p)}};function h(w){var o=w.data("settings");var t=w.siblings(".ui-timepicker-list");if(t&&t.length){t.remove()}t=e("<ul />");t.attr("tabindex",-1);t.addClass("ui-timepicker-list");if(o.className){t.addClass(o.className)}var u=w.css("zIndex");u=(u+0==u)?u+1:2;t.css({display:"none",position:"absolute",left:(w.position().left),zIndex:u});if(o.minTime!==null&&o.showDuration){t.addClass("ui-timepicker-with-duration")}var s=(o.durationTime!==null)?o.durationTime:o.minTime;var n=(o.minTime!==null)?o.minTime:0;var q=(o.maxTime!==null)?o.maxTime:(n+b-1);if(q<=n){q+=b}for(var r=n;r<=q;r+=o.step*60){var v=r%b;var x=e("<li />");x.data("time",v);x.text(g(v,o.timeFormat));if(o.minTime!==null&&o.showDuration){var p=e("<span />");p.addClass("ui-timepicker-duration");p.text(" ("+i(r-s)+")");x.append(p)}t.append(x)}w.after(t);l(w,t);t.delegate("li","click",{timepicker:w},function(y){w.addClass("ui-timepicker-hideme");w[0].focus();t.find("li").removeClass("ui-timepicker-selected");e(this).addClass("ui-timepicker-selected");k(w);t.hide()})}function j(n,r,q){if(!q&&q!==0){return false}var p=n.data("settings");var o=false;r.find("li").each(function(s,u){var t=e(u);if(Math.abs(t.data("time")-q)<=p.step*30){o=t;return false}});return o}function l(n,q){var p=f(n.val());var o=j(n,q,p);if(o){o.addClass("ui-timepicker-selected")}}function a(q){var n=e(this);var p=n.siblings(".ui-timepicker-list");if(!p.is(":visible")){if(q.keyCode==40){n.focus()}else{return true}}switch(q.keyCode){case 13:k(n);c.hide.apply(this);q.preventDefault();return false;break;case 38:var o=p.find(".ui-timepicker-selected");if(!o.length){var o;p.children().each(function(r,s){if(e(s).position().top>0){o=e(s);return false}});o.addClass("ui-timepicker-selected")}else{if(!o.is(":first-child")){o.removeClass("ui-timepicker-selected");o.prev().addClass("ui-timepicker-selected");if(o.prev().position().top<o.outerHeight()){p.scrollTop(p.scrollTop()-o.outerHeight())}}}break;case 40:var o=p.find(".ui-timepicker-selected");if(o.length==0){var o;p.children().each(function(r,s){if(e(s).position().top>0){o=e(s);return false}});o.addClass("ui-timepicker-selected")}else{if(!o.is(":last-child")){o.removeClass("ui-timepicker-selected");o.next().addClass("ui-timepicker-selected");if(o.next().position().top+2*o.outerHeight()>p.outerHeight()){p.scrollTop(p.scrollTop()+o.outerHeight())}}}break;case 27:p.find("li").removeClass("ui-timepicker-selected");p.hide();break;case 9:case 16:case 17:case 18:case 19:case 20:case 33:case 34:case 35:case 36:case 37:case 39:case 45:return;default:p.find("li").removeClass("ui-timepicker-selected");return}}function k(n){var q=n.data("settings");var r=n.siblings(".ui-timepicker-list");var p=null;var s=r.find(".ui-timepicker-selected");if(s.length){var p=s.data("time")}else{if(n.val()){var p=f(n.val());l(n,r)}}if(p!==null){var o=g(p,q.timeFormat);n.attr("value",o)}q.onSelect.call(n);n.trigger("change")}function i(p){var o=Math.round(p/60);if(o<60){return o+" mins"}else{if(o==60){return"1 hr"}else{var n=o/60;return n.toFixed(1)+" hrs"}}}function g(u,t){var s=new Date((u+m*60)*1000);var o="";for(var q=0;q<t.length;q++){var r=t.charAt(q);switch(r){case"a":o+=(s.getHours()>11)?"pm":"am";break;case"A":o+=(s.getHours()>11)?"PM":"AM";break;case"g":var n=s.getHours()%12;o+=(n==0)?"12":n;break;case"G":o+=s.getHours();break;case"h":var n=s.getHours()%12;if(n!=0&&n<10){n="0"+n}o+=(n==0)?"12":n;break;case"H":var n=s.getHours();o+=(n>9)?n:"0"+n;break;case"i":var p=s.getMinutes();o+=(p>9)?p:"0"+p;break;case"s":var u=s.getSeconds();o+=(u>9)?u:"0"+u;break;default:o+=r}}return o}function f(q){if(q==""){return null}if(q+0==q){return q}if(typeof(q)=="object"){q=q.getHours()+":"+q.getMinutes()}var s=new Date(0);var r=q.toLowerCase().match(/(\d+)(?::(\d\d))?\s*([pa]?)/);if(!r){return null}var o=parseInt(r[1]*1);if(r[3]){if(o==12){var n=(r[3]=="p")?12:0}else{var n=(o+(r[3]=="p"?12:0))}}else{var n=o}var p=(r[2]*1||0);return n*3600+p*60}e.fn.timepicker=function(n){if(c[n]){return c[n].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof n==="object"||!n){return c.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.timepicker")}}}})(jQuery);